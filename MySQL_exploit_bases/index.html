<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://cyber-puit-de-connaissances.com/MySQL_exploit_bases/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>MySQL - Cyber-puit de connaissances</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "MySQL";
        var mkdocs_page_input_path = "MySQL_exploit_bases.md";
        var mkdocs_page_url = "/MySQL_exploit_bases/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cyber-puit de connaissances
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../accueil/">Accueil</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Utile</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../ecoute_ports.md">Ecoute de ports</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sites_utiles/">Les sites utiles</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Outils</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Nmap</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../nmap_bases_scan/">Les scans</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../nmap_bases_utiles/">Utile</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Metasploit</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../metasploit_bases/">Les bases</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../metasploit_exploits/">Les exploits</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../metasploit_msfvenom/">Les shells</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../metasploit_meterpreter/">Les post-exploits</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Hydra</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../hydra_bases/">Les bases</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Wireshark</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../wireshark_bases/">Les bases</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Nessus</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../nessus_bases/">Les bases</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Exploits</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Les protocoles</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../SMB_exploit_bases/">SMB</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../TELNET_exploit_bases/">TELNET</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FTP_exploit_bases/">FTP</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NFS_exploit_bases/">NFS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SSH_exploit_bases/">SSH</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SMTP_exploit_bases/">SMTP</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Web</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../web_exploit_bases/">Les bases</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Wifi</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../wifi-cracking/">Wifi mdp cracking</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Autre services</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">MySQL</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#explication-des-mots-cles-mysql">Explication des mots clés MySQL</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#enumeration">Enumeration</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#intro-sur-lenumeration-mysql">Intro sur l'énumération MySQL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ports-de-base-sql">Ports de base SQL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#packet-necessaire">Packet nécessaire</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#outils-utilises-pour-lenumation-mysql">Outils utilisés pour l'énumation MySQL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#connexion-a-mysql">Connexion à MySQL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#utilisation-de-metasploit">Utilisation de Metasploit</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exploitation">Exploitation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dump-des-bases-de-donnees">Dump des bases de données</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dump-des-hashs-des-mots-de-passe">Dump des hashs des mots de passe</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#dump-des-hashs-des-mots-de-passe-sur-sqlite-manuellement">Dump des hashs des mots de passe sur sqlite manuellement</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Les OS</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../vide/">Windows</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Linux</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../linux_commandes_utiles/">Commandes utiles</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Réseau</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../changer_DNS_windows/">Changer DNS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Système</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">BIOS</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="#">Accès au hardware</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../reset_mdp_BIOS_hardware_PC_fixe/">PC fixe</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../reset_mdp_BIOS_hardware_PC_portable/">PC portable</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cyber-puit de connaissances</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Exploits &raquo;</li>
          <li>Autre services &raquo;</li>
      <li class="breadcrumb-item active">MySQL</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="les-bases-de-mysql">Les bases de MySQL</h1>
<h2 id="introduction">Introduction</h2>
<p>SQL (Structured Query Language) est un langage de requête structuré utilisé pour communiquer avec une base de données relationnelle. Il est utilisé pour effectuer des opérations sur les données stockées dans une base de données ou pour modifier les données existantes. Il est principalement utilisé pour la gestion des données dans les systèmes de gestion de bases de données relationnelles (SGBDR), tels que MySQL, Oracle, Sybase, Microsoft SQL Server, PostgreSQL et SQLite.</p>
<p>Le serveur gère toutes les instructions relatives à la base de données, telles que la création, l'édition et l'accès aux données. Il reçoit et gère ces demandes et communique à l'aide du protocole MySQL. L'ensemble du processus peut être décomposé en plusieurs étapes :</p>
<ul>
<li>MySQL crée une base de données pour stocker et manipuler les données, en définissant les relations entre chaque table.</li>
<li>Les clients formulent des requêtes en utilisant des instructions spécifiques en SQL.</li>
<li>Le serveur répond au client en lui fournissant les informations demandées</li>
</ul>
<p>MySQL peut fonctionner sur différentes plateformes, qu'il s'agisse de Linux ou de Windows. Il est couramment utilisé comme base de données dorsale pour de nombreux sites web importants et constitue un composant essentiel de la pile LAMP, qui comprend : Linux, Apache, MySQL et PHP.</p>
<h3 id="explication-des-mots-cles-mysql">Explication des mots clés MySQL</h3>
<h4 id="schema">Schéma</h4>
<p>Dans MySQL, physiquement, un schéma est synonyme de base de données. Vous pouvez remplacer le mot-clé "DATABASE" par "SCHEMA" dans la syntaxe SQL de MySQL, par exemple en utilisant CREATE SCHEMA au lieu de CREATE DATABASE. Il est important de comprendre cette relation car d'autres produits de base de données font une distinction. Par exemple, dans le produit Oracle Database, un schéma ne représente qu'une partie d'une base de données : les tables et autres objets appartenant à un seul utilisateur.</p>
<h4 id="les-hashs">Les Hashs :</h4>
<p>Les hachages sont, très simplement, le produit d'un algorithme cryptographique qui transforme une entrée de longueur variable en une sortie de longueur fixe.</p>
<p>Dans MySQL, les hachages peuvent être utilisés de différentes manières, par exemple pour indexer des données dans une table de hachage. Chaque hachage possède un identifiant unique qui sert de pointeur vers les données d'origine. Cela permet de créer un index beaucoup plus petit que les données d'origine, ce qui permet de rechercher et d'accéder aux valeurs de manière plus efficace</p>
<p>Cependant, les données que nous allons extraire sont des hachages de mots de passe, qui sont simplement un moyen de stocker des mots de passe qui ne sont pas en clair.</p>
<h2 id="enumeration">Enumeration</h2>
<h3 id="intro-sur-lenumeration-mysql">Intro sur l'énumération MySQL</h3>
<p>MySQL n'est probablement pas le premier point d'appel lorsque vous obtenez des informations initiales sur le serveur. Vous pouvez, essayer de forcer les mots de passe des comptes par défaut si vous n'avez vraiment pas d'autres informations ; cependant, dans la plupart des scénarios CTF, il est peu probable que ce soit la voie que vous soyez censé suivre. En règle générale, vous aurez obtenu des informations d'identification initiales en énumérant d'autres services, que vous pourrez ensuite utiliser pour énumérer et exploiter le service MySQL.</p>
<h3 id="ports-de-base-sql">Ports de base SQL</h3>
<p>Le port de base SQL est le port 3306. C'est du TCP/IP.</p>
<h3 id="packet-necessaire">Packet nécessaire</h3>
<p>Pour l'énumération de MySQL, il faut un client MySQL. Le plus légé est <strong>mysql-client</strong>.
Mais il existe aussi <strong>mysql-workbench</strong> qui est plus complet.</p>
<h3 id="outils-utilises-pour-lenumation-mysql">Outils utilisés pour l'énumation MySQL</h3>
<p>On va utiliser Metasploit pour l'énumération de MySQL. On va utiliser le module <strong>auxiliary/scanner/mysql/mysql_login</strong>. Mais il existe aussi des outils comme <strong>SQLMap</strong>, <strong>SQLNinja</strong> et <strong>SQLPing</strong>. Ou encore le script <strong>mysql-enum</strong> de <strong>nmap</strong> : <a href="https://nmap.org/nsedoc/scripts/mysql-enum.html">scitp infos</a> ou <a href="https://www.exploit-db.com/exploits/23081">exploit db</a></p>
<h3 id="connexion-a-mysql">Connexion à MySQL</h3>
<p>Pour se connecter à MySQL, on utilise la commande suivante :</p>
<pre><code class="language-bash">mysql -u &lt;user&gt; -p &lt;password&gt; -h &lt;host&gt; -P &lt;port&gt;
</code></pre>
<h3 id="utilisation-de-metasploit">Utilisation de Metasploit</h3>
<p>Supposons qu'on ai récupéré le couple USER:PASSWORD, on va utiliser le module <strong>auxiliary/scanner/mysql/mysql_login</strong> de Metasploit.</p>
<pre><code class="language-bash">msf5 &gt; use auxiliary/scanner/mysql/mysql_login
msf5 auxiliary(scanner/mysql/mysql_login) &gt; set RHOSTS
RHOSTS =&gt;
msf5 auxiliary(scanner/mysql/mysql_login) &gt; set PASSWORD
PASSWORD =&gt;
msf5 auxiliary(scanner/mysql/mysql_login) &gt; set USERNAME
USERNAME =&gt;
msf5 auxiliary(scanner/mysql/mysql_login) &gt; run
</code></pre>
<p>Par défaut l'option <code>SQL</code> est <code>select version()</code>. Donc cela va nous retourner la version de MySQL.
Mais on peut changer pour <code>show databases</code> pour afficher les bases de données.</p>
<p>Plus d'infos sur le module : <a href="https://www.infosecmatter.com/metasploit-module-library/?mm=auxiliary/scanner/mysql/mysql_login">ici</a></p>
<h2 id="exploitation">Exploitation</h2>
<h2 id="dump-des-bases-de-donnees">Dump des bases de données</h2>
<p>Pour dump les bases de données on va utiliser le module <strong>mysql_schemadump</strong> de Metasploit.</p>
<pre><code class="language-bash">msf5 &gt; use auxiliary/scanner/mysql/mysql_schemadump
msf5 auxiliary(scanner/mysql/mysql_schemadump) &gt; set RHOSTS
RHOSTS =&gt;
msf5 auxiliary(scanner/mysql/mysql_schemadump) &gt; set PASSWORD
PASSWORD =&gt;
msf5 auxiliary(scanner/mysql/mysql_schemadump) &gt; set USERNAME
USERNAME =&gt;
msf5 auxiliary(scanner/mysql/mysql_schemadump) &gt; run
</code></pre>
<h2 id="dump-des-hashs-des-mots-de-passe">Dump des hashs des mots de passe</h2>
<p>Pour dump les hashs des mots de passe on va utiliser le module <strong>mysql_hashdump</strong> de Metasploit.</p>
<pre><code class="language-bash">msf5 &gt; use auxiliary/scanner/mysql/mysql_hashdump
msf5 auxiliary(scanner/mysql/mysql_hashdump) &gt; set RHOSTS
...
msf5 auxiliary(scanner/mysql/mysql_hashdump) &gt; run
</code></pre>
<h3 id="dump-des-hashs-des-mots-de-passe-sur-sqlite-manuellement">Dump des hashs des mots de passe sur sqlite manuellement</h3>
<p>Pour dump les hashs des mots de passe, supposons que l'on a accès au fichier '.db' qui n'est autre que la base de donnée d'un site internet. Il suffit de la télécharger et de l'ouvrir avec un outil comme <strong>sqlite3</strong>. 
Exemple :</p>
<pre><code class="language-bash">sqlite3 &lt;database&gt;
</code></pre>
<p>On va afficher les tables :</p>
<pre><code class="language-bash">.tables
</code></pre>
<p>On va afficher les informations sur les tables trouvées :</p>
<pre><code class="language-bash">PRAGMA table_info(&lt;nom de la table&gt;);
</code></pre>
<p>On va afficher les données de la table :</p>
<pre><code class="language-bash">SELECT * FROM &lt;nom de la table&gt;;
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../wifi-cracking/" class="btn btn-neutral float-left" title="Wifi mdp cracking"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../vide/" class="btn btn-neutral float-right" title="Windows">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../wifi-cracking/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../vide/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
